
### 15.1 DevOps - Deployment, Docker & K8s

---------------------------------------------
| REF | |
| - | - |
| 1 | [Docker Compose with .NET 8, PostgreSQL, and Redis](https://www.youtube.com/watch?v=WQFx2m5Ub9M&t=430s) |
| 2 | [Microsoft Tutorial: Containerize a .NET app](https://learn.microsoft.com/en-us/dotnet/core/docker/build-container?tabs=windows&pivots=dotnet-9-0) |
---------------------------------------------

   <details>
  <summary>ADDITIONAL DETAILS </summary>  


  
  </details>
---------------------------------------------
### 1. Writing a Dockerfile for .NET Applications

STEPS
1. Create a .NET Application

![image](https://github.com/user-attachments/assets/06599053-91e0-4610-b418-976ab12bda4c)
  
2. Publish .NET app

* In order for the app to be suitable for an image creation it has to compile. The dotnet publish command is most apt for this, as it builds and publishes the app.
* The dotnet publish command compiles your app to the publish folder. The path to the publish folder from the working folder should be ./App/bin/Release/<TFM>/publish/:

```cs
dotnet publish -c Release
```

4. Create Dockerfile

   <details>
  <summary>ADDITIONAL DETAILS </summary>  

![image](https://github.com/user-attachments/assets/b543e67d-2b8c-4c0a-910a-5727a93a22de)

![image](https://github.com/user-attachments/assets/dffa3457-71b1-48f1-8859-d04b1b1535ca)

  </details>

4. 

---------------------------------------------
---------------------------------------------
### 2. Docker - Popular/Basic commands

---------------------------------------------
---------------------------------------------
### 3. Docker Compose

---------------------------------------------
---------------------------------------------
### 4. How to fix an app which is running very slow in production but its working fine in DEV & UAT environment

![image](https://github.com/user-attachments/assets/9e3d8223-d03c-442a-9b2a-9e0421d1925f)

<details>
  <summary>ADDITIONAL DETAILS </summary>  

![image](https://github.com/user-attachments/assets/4d0cb2a5-6af5-48a1-b99a-f882b55c1b9c)

![image](https://github.com/user-attachments/assets/1c9585d6-b0cd-44d3-9322-59b7a67b2dba)

![image](https://github.com/user-attachments/assets/f90e633e-ea83-4a88-a220-c36cd8f27cc4)

![image](https://github.com/user-attachments/assets/87dc5c96-4d6d-4f9b-b59e-77b6459e4354)

</details>

![image](https://github.com/user-attachments/assets/69b21a41-b88b-4a38-b405-3977b3ad2596)

---------------------------------------------
---------------------------------------------
### 5. How to specify configs for diff environments like uat, dev or prod

*  **Managing Configuration for Different Environments (Dev, UAT, Prod) in .NET**
*  **How to save Secrets & sensitive data (passwords, API keys)**

In .NET, you can manage environment-specific configurations using appsettings files, environment variables, or Azure App Configuration.

**1. Using appsettings.{Environment}.json (Recommended)**
  Different appsettings.json files for each environment:
  
<details>
  <summary>ADDITIONAL DETAILS </summary>  

![image](https://github.com/user-attachments/assets/38436105-69c3-47ac-8532-988a06512d7f)
![image](https://github.com/user-attachments/assets/b1d64940-a929-48ec-9867-2b83b6f23e7f)
  
</details>

![image](https://github.com/user-attachments/assets/5c0fbb62-23c5-4c2f-8d41-8449ccf1be4e)

**2. Setting the Environment Variable (ASPNETCORE_ENVIRONMENT)**
  Configure environment to use by setting ASPNETCORE_ENVIRONMENT.

<details>
  <summary>ADDITIONAL DETAILS </summary>  

![image](https://github.com/user-attachments/assets/5deb5f98-6061-4be5-b856-4e997ca31be7)

</details>

**3. Access Configuration in Code**
  You can inject and use IConfiguration in your C# code:
  
  <details>
  <summary>ADDITIONAL DETAILS </summary>  

![image](https://github.com/user-attachments/assets/316fd11a-bf9d-4d44-b14f-37ba35772795)

</details>

**4. Using Environment Variables (Best for Secrets)**
  Instead of hardcoding values in appsettings.json, you can use environment variables (safer for secrets).
  
![image](https://github.com/user-attachments/assets/67410ae4-250d-4a75-8829-7ffa172686b8)

**5. Using Azure App Configuration (For Cloud Environments)**

<details>
  <summary>ADDITIONAL DETAILS </summary>  
![image](https://github.com/user-attachments/assets/6b4a8236-f64c-4c38-8785-37cda8d12fdb)

</details>

![image](https://github.com/user-attachments/assets/276aa7e1-3665-486d-95e8-2c695e834a82)

---------------------------------------------
### 
<details>
  <summary>ADDITIONAL DETAILS </summary>  
</details>
---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
### 

---------------------------------------------
